(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d39d3c0"],{"273c":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"container-loading"},[e("mt-spinner",{attrs:{type:"triple-bounce",color:t.color,size:50}})],1)},i=[],n=(e("cadf"),e("551c"),e("8a81"),e("f751"),e("2fdb"),{name:"pageLoading",data:function(){return{}},props:{color:{type:String,default:"#333"}}}),o=n,u=(e("64a0"),e("2877")),r=Object(u["a"])(o,s,i,!1,null,"0a07c8d2",null);r.options.__file="pageLoading.vue";a["a"]=r.exports},"40a3":function(t,a,e){},"5cf6":function(t,a,e){},"64a0":function(t,a,e){"use strict";var s=e("40a3"),i=e.n(s);i.a},"91b8":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"page-container"},["ok"==t.pageStatus?e("section",{staticClass:"container"},[e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"info"},[e("div",{staticClass:"infot"},[e("img",{staticClass:"avatar",attrs:{src:t.pageData.advUserData.avatar,alt:""}}),e("div",{staticClass:"infot-r"},[e("div",{staticClass:"infot-rt"},[e("p",{staticClass:"nickname text-hidden-one"},[t._v(t._s(t.pageData.advUserData.nickname))]),e("p",{staticClass:"orders"},[t._v(t._s(t.pageData.advUserData.orderCount)+"单 | "+t._s(t.$numeral(t.pageData.advUserData.finishRate).multiply(100).format("0"))+"%")])]),t.pageData.advUserData.tagUrl?e("div",{staticClass:"infot-rb"},[e("img",{staticClass:"badge",attrs:{src:t.pageData.advUserData.tagUrl,alt:""}})]):t._e()])]),e("ul",{staticClass:"info-list"},[e("li",{staticClass:"info-item clearfix"},[e("p",{staticClass:"info-item-field"},[t._v("单价")]),e("p",{staticClass:"info-item-value"},[t._v("¥ "+t._s(t.pageData.price))])]),e("li",{staticClass:"info-item clearfix"},[e("p",{staticClass:"info-item-field"},[t._v("数量")]),e("p",{staticClass:"info-item-value"},[t._v(t._s(t.pageData.remainAmount)+" "+t._s(t.pageData.symbol))])]),e("li",{staticClass:"info-item clearfix"},[e("p",{staticClass:"info-item-field"},[t._v("限额")]),e("p",{staticClass:"info-item-value"},[t._v("¥"+t._s(t.pageData.minValue)+"-"+t._s(t.pageData.maxValue))])])])]),t.pageData.note?e("div",{staticClass:"info-note"},[e("p",{staticClass:"field"},[t._v("备注")]),e("p",{staticClass:"value"},[t._v(t._s(t.pageData.note))])]):t._e()]),e("div",{staticClass:"operate"},[e("div",{staticClass:"input-wrap"},[e("div",{staticClass:"operate-item operate-amount"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.buyAmount,expression:"buyAmount"}],staticClass:"operate-input input-amount",attrs:{type:"number",placeholder:"0.00"},domProps:{value:t.buyAmount},on:{input:[function(a){a.target.composing||(t.buyAmount=a.target.value)},t.handleInputAmount]}}),e("p",{staticClass:"operate-text text-hidden-one"},[t._v("输入买入数量"),e("span",[t._v(t._s(t.pageData.symbol))])]),t.isMaxLessThanMin?e("p",{staticClass:"operate-text"},[t._v("-")]):e("p",{staticClass:"operate-text"},[t._v("("+t._s(t.minBuyAmount)+"-"+t._s(t.maxBuyAmount)+")")])]),e("div",{staticClass:"operate-item operate-value"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.buyValue,expression:"buyValue"}],staticClass:"operate-input input-value",attrs:{type:"number",placeholder:"0.00"},domProps:{value:t.buyValue},on:{input:[function(a){a.target.composing||(t.buyValue=a.target.value)},t.handleInputValue]}}),t._m(0),t.isMaxLessThanMin?e("p",{staticClass:"operate-text"},[t._v("-")]):e("p",{staticClass:"operate-text"},[t._v("("+t._s(t.minBuyValue)+"-"+t._s(t.maxBuyValue)+")")])]),e("a",{staticClass:"btn-exchange",attrs:{href:"javascript:;"}})])]),e("div",{staticClass:"btn-wrap"},[t.countdownTime?[e("a",{staticClass:"common-btn common-btn-outline btn-cancel",attrs:{href:"javascript:;"},on:{click:t.cancelOrder}},[t._v("取消("+t._s(t.countdownTime)+")")]),e("a",{staticClass:"common-btn btn-sell",attrs:{href:"javascript:;"},on:{click:t.addBuyOrder}},[t._v("立即买入")])]:e("a",{staticClass:"common-btn common-btn-outline btn-canceled",attrs:{href:"javascript:;"}},[t._v("已超出购买时间")])],2)]):e("page-loading",{attrs:{color:"#4D72FE"}})],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",{staticClass:"operate-text text-hidden-one"},[t._v("输入买入金额"),e("span",[t._v("CNY")])])}],n=(e("a481"),e("cadf"),e("551c"),e("8a81"),e("f751"),e("2fdb"),e("273c")),o={name:"orderAdd",data:function(){return{pageStatus:"",pageData:{},assetList:null,userAmount:"",advId:"",lastInput:"amount",minBuyValue:"",minBuyAmount:"",maxBuyValue:"",maxBuyAmount:"",isMaxLessThanMin:!1,buyAmount:"",buyValue:"",countdownTime:60,timer:null}},computed:{},created:function(){var t=this;this.advId=this.$route.query.advId,this.$http.post(this.$api.getAdvData,{advId:this.advId}).then(function(a){0==a.data.errcode?(t.pageData=a.data.data,t.calcInputRange(),t.countdownTimeInit(),t.$utils.setDocumentTitle("买入 ".concat(t.pageData.symbol)),t.pageStatus="ok"):t.$toast("提示：".concat(a.data.errmsg))})},beforeDestory:function(){clearInterval(this.timer)},methods:{countdownTimeInit:function(){var t=this;this.timer=setInterval(function(){t.countdownTime>0?t.countdownTime--:clearInterval(t.timer)},1e3)},calcInputRange:function(){this.minBuyValue=this.$numeral(this.pageData.minValue).format("0.00"),this.minBuyAmount=this.$numeral(this.minBuyValue).divide(this.pageData.price).format("0.0000",Math.ceil);var t=this.$numeral(this.pageData.maxValue).divide(this.pageData.price).format("0.0000",Math.floor),a=this.pageData.remainAmount;+a>+t&&(a=t),this.maxBuyAmount=a,this.maxBuyValue=this.$numeral(a).multiply(this.pageData.price).format("0.00",Math.floor),+this.minBuyValue>+this.maxBuyValue&&(this.isMaxLessThanMin=!0)},handleInputAmount:function(){this.buyValue=Math.floor(this.buyAmount*this.pageData.price*100)/100||"",this.lastInput="amount"},handleInputValue:function(){this.buyAmount=Math.ceil(this.buyValue/this.pageData.price*1e4)/1e4||"",this.lastInput="value"},addBuyOrder:function(){var t=this;if("amount"===this.lastInput){if(+this.buyAmount>+this.maxBuyAmount)return this.$toast("最多可输入".concat(this.maxBuyAmount," ").concat(this.pageData.symbol));if(+this.buyAmount<+this.minBuyAmount)return this.$toast("最少需输入".concat(this.minBuyAmount," ").concat(this.pageData.symbol))}else{if(+this.buyValue>+this.maxBuyValue)return this.$toast("最多可输入".concat(this.maxBuyValue," 元"));if(+this.buyValue<+this.minBuyValue)return this.$toast("最少需输入".concat(this.minBuyValue," 元"))}this.$indicator.open("订单准备中..."),this.$http.post(this.$api.addOrder,{advId:this.advId,amount:this.buyAmount,marketPrice:this.pageData.marketPrice,price:this.pageData.price}).then(function(a){t.$indicator.close(),0==a.data.errcode?t.$router.push({path:"/orderBuyer",query:{orderId:a.data.data.orderId}}):t.$toast("提示：".concat(a.data.errmsg))}).catch(function(a){console.log(a),t.$indicator.close()})},cancelOrder:function(){this.$router.replace("/index")}},components:{pageLoading:n["a"]}},u=o,r=(e("c04b"),e("2877")),c=Object(r["a"])(u,s,i,!1,null,"e4be0112",null);c.options.__file="orderAddBuy.vue";a["default"]=c.exports},c04b:function(t,a,e){"use strict";var s=e("5cf6"),i=e.n(s);i.a}}]);