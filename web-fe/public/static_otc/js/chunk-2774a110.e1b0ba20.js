(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2774a110"],{"1af6":function(t,a,e){var s=e("63b6");s(s.S,"Array",{isArray:e("9003")})},"20fd":function(t,a,e){"use strict";var s=e("d9f6"),i=e("aebd");t.exports=function(t,a,e){a in t?s.f(t,a,i(0,e)):t[a]=e}},"26fc":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",[e("div",{staticClass:"tabbar",style:{position:t.position}},[e("div",{staticClass:"tabbar-item index",class:"index"==t.tabActive?"active":"",on:{click:function(a){t.toggleTab("index")}}},[e("p",{staticClass:"icon"}),e("p",{staticClass:"text"},[t._v("大厅")])]),e("div",{staticClass:"tabbar-item orders",class:"orders"==t.tabActive?"active":"",on:{click:function(a){t.toggleTab("orders")}}},[e("p",{staticClass:"icon"},[t.tabbarMsg?e("span",{staticClass:"msg"},[t._v(t._s(t.tabbarMsg))]):t._e()]),e("p",{staticClass:"text"},[t._v("订单")])]),e("div",{staticClass:"tabbar-item user",class:"user"==t.tabActive?"active":"",on:{click:function(a){t.toggleTab("user")}}},[e("p",{staticClass:"icon"}),e("p",{staticClass:"text"},[t._v("我")])])])])},i=[],r=(e("a481"),e("cebc")),o=e("2f62"),n={name:"tabbar",data:function(){return{}},props:{tabActive:String,position:{type:String,default:"fixed"}},computed:Object(r["a"])({},Object(o["c"])(["tabbarMsg"])),methods:{toggleTab:function(t){"index"===t?this.$router.replace("/index"):"orders"===t?this.$router.replace("/orders"):"user"===t&&this.$router.replace("/user")}}},c=n,l=(e("78bf"),e("2877")),d=Object(l["a"])(c,s,i,!1,null,"5ca493c8",null);d.options.__file="tabbar.vue";a["a"]=d.exports},"273c":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"container-loading"},[e("mt-spinner",{attrs:{type:"triple-bounce",color:t.color,size:50}})],1)},i=[],r=(e("cadf"),e("551c"),e("8a81"),e("f751"),e("2fdb"),{name:"pageLoading",data:function(){return{}},props:{color:{type:String,default:"#333"}}}),o=r,n=(e("64a0"),e("2877")),c=Object(n["a"])(o,s,i,!1,null,"0a07c8d2",null);c.options.__file="pageLoading.vue";a["a"]=c.exports},"40a3":function(t,a,e){},"454a":function(t,a,e){},"549b":function(t,a,e){"use strict";var s=e("d864"),i=e("63b6"),r=e("241e"),o=e("b0dc"),n=e("3702"),c=e("b447"),l=e("20fd"),d=e("7cd6");i(i.S+i.F*!e("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var a,e,i,u,p=r(t),f="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,g=void 0!==b,m=0,h=d(p);if(g&&(b=s(b,v>2?arguments[2]:void 0,2)),void 0==h||f==Array&&n(h))for(a=c(p.length),e=new f(a);a>m;m++)l(e,m,g?b(p[m],m):p[m]);else for(u=h.call(p),e=new f;!(i=u.next()).done;m++)l(e,m,g?o(u,b,[i.value,m],!0):i.value);return e.length=m,e}})},"54a1":function(t,a,e){e("6c1c"),e("1654"),t.exports=e("95d5")},"64a0":function(t,a,e){"use strict";var s=e("40a3"),i=e.n(s);i.a},"6a2b":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",[s("div",{staticClass:"no-data"},[s("img",{staticClass:"icon",attrs:{src:e("f65a")}}),s("p",{staticClass:"text"},[t._v("暂无数据")])])])}],r={name:"noData"},o=r,n=(e("9cb6"),e("2877")),c=Object(n["a"])(o,s,i,!1,null,"4ff29daa",null);c.options.__file="noData.vue";a["a"]=c.exports},"75fc":function(t,a,e){"use strict";var s=e("a745"),i=e.n(s);function r(t){if(i()(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}var o=e("774e"),n=e.n(o),c=e("c8bb"),l=e.n(c);function d(t){if(l()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return n()(t)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return r(t)||d(t)||u()}e.d(a,"a",function(){return p})},"774e":function(t,a,e){t.exports=e("d2d5")},"78bf":function(t,a,e){"use strict";var s=e("89c3"),i=e.n(s);i.a},"89c3":function(t,a,e){},"95d5":function(t,a,e){var s=e("40c3"),i=e("5168")("iterator"),r=e("481b");t.exports=e("584a").isIterable=function(t){var a=Object(t);return void 0!==a[i]||"@@iterator"in a||r.hasOwnProperty(s(a))}},"9cb6":function(t,a,e){"use strict";var s=e("cd61"),i=e.n(s);i.a},a745:function(t,a,e){t.exports=e("f410")},c2ec:function(t,a,e){"use strict";var s=e("454a"),i=e.n(s);i.a},c8bb:function(t,a,e){t.exports=e("54a1")},cd61:function(t,a,e){},d2d5:function(t,a,e){e("1654"),e("549b"),t.exports=e("584a").Array.from},f410:function(t,a,e){e("1af6"),t.exports=e("584a").Array.isArray},f65a:function(t,a,e){t.exports=e.p+"img/icon_nodata.4e2c3065.png"},ff9a:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"page-container"},[e("tabbar",{ref:"tabbar",attrs:{tabActive:"orders"}}),e("div",{staticClass:"tabbar-top"},[e("div",{staticClass:"tabbar-top-item",class:{active:"doing"===t.ordersFilter},on:{click:function(a){t.toggleOrder("doing")}}},[e("p",{staticClass:"text"},[t._v("正在进行"),e("span",{directives:[{name:"show",rawName:"v-show",value:t.tabbarMsg,expression:"tabbarMsg"}],staticClass:"msg"},[t._v(t._s(t.tabbarMsg))])])]),e("div",{staticClass:"tabbar-top-item",class:{active:"done"===t.ordersFilter},on:{click:function(a){t.toggleOrder("done")}}},[e("p",{staticClass:"text"},[t._v("已完成")])]),e("div",{staticClass:"tabbar-top-item",class:{active:"cancelled"===t.ordersFilter},on:{click:function(a){t.toggleOrder("cancelled")}}},[e("p",{staticClass:"text"},[t._v("已取消")])])]),"ok"==t.pageStatus?e("section",{staticClass:"container"},[e("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop}},[t.pageData.orderList.length?e("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"order-list",attrs:{"infinite-scroll-distance":"10","infinite-scroll-immediate-check":!0}},[t._l(t.pageData.orderList,function(a){return e("li",{key:a.orderId,staticClass:"order-item",class:{cancel:"cancelled"===a.status},on:{click:function(e){t.toOrderDetail(a)}}},[e("div",{staticClass:"title-wrap clearfix"},[e("p",{staticClass:"title-icon",class:{buy:"buy"===a.myAction,sell:"sell"===a.myAction}}),e("p",{staticClass:"title"},[t._v(t._s("buy"===a.myAction?"购买":"出售")+" "+t._s(a.symbol))]),"done"!=a.status?["buyer"===a.appealStatus&&"buy"===a.myAction?e("p",{staticClass:"appeal"},[t._v("您已申诉")]):t._e(),"buyer"===a.appealStatus&&"sell"===a.myAction?e("p",{staticClass:"appeal"},[t._v("对方申诉")]):t._e(),"seller"===a.appealStatus&&"buy"===a.myAction?e("p",{staticClass:"appeal"},[t._v("对方申诉")]):t._e(),"seller"===a.appealStatus&&"sell"===a.myAction?e("p",{staticClass:"appeal"},[t._v("您已申诉")]):t._e(),"all"===a.appealStatus?e("p",{staticClass:"appeal"},[t._v("申诉中")]):t._e()]:t._e(),e("p",{staticClass:"title-price dinMedium"},[t._v("¥ "+t._s(a.value))])],2),e("div",{staticClass:"info-wrap clearfix"},[e("div",{staticClass:"info-list"},[e("div",{staticClass:"info-item clearfix"},[e("p",{staticClass:"field"},[t._v(t._s("buy"===a.myAction?"卖家":"买家"))]),e("p",{staticClass:"value"},[t._v(t._s(a.showNickname))]),e("img",{staticClass:"avatar",attrs:{src:a.showAvatar,alt:""}})]),e("div",{staticClass:"info-item clearfix"},[e("p",{staticClass:"field"},[t._v("数量")]),e("p",{staticClass:"value"},[t._v(t._s(a.amount)+" "+t._s(a.symbol))])]),e("div",{staticClass:"info-item clearfix"},[e("p",{staticClass:"field"},[t._v("订单号")]),e("p",{staticClass:"value"},[t._v(t._s(a.orderNum))])])]),e("div",{staticClass:"state-wrap clearfix"},[e("p",{staticClass:"state-time"},[t._v(t._s(t._f("timestamp2agoText")(a.orderTime)))]),"ordered"===a.status?e("p",{staticClass:"state orange"},[t._v(t._s("buy"===a.myAction?"请完成付款":"等待对方付款"))]):"cancelled"===a.status?e("p",{staticClass:"state"},[t._v("已取消")]):"paid"===a.status?e("p",{staticClass:"state orange"},[t._v(t._s("buy"===a.myAction?"等待对方确认收款":"请确认收到付款"))]):"overdue"===a.status?e("p",{staticClass:"state orange"},[t._v(t._s("buy"===a.myAction?"等待对方确认收款":"确认付款已超时"))]):"done"===a.status?e("p",{staticClass:"state green"},[t._v("已完成")]):t._e()])])])}),t.isLoading?e("mt-spinner",{staticClass:"loading-icon",attrs:{color:"#aaa",type:"triple-bounce"}}):t._e(),t.isLoadOver?e("p",{staticClass:"loading-over"},[t._v("已无更多")]):t._e()],2):e("noData")],1)],1):e("page-loading",{attrs:{color:"#4D72FE"}})],1)},i=[],r=e("75fc"),o=e("cebc"),n=e("2f62"),c=e("273c"),l=e("26fc"),d=e("6a2b"),u={name:"orderList",data:function(){return{pageStatus:"",pageData:{},ordersFilter:"doing",isLoading:!1,isLoadOver:!1,currentPage:1}},computed:Object(o["a"])({},Object(n["c"])(["otcTabbarState","tabbarMsg"])),mounted:function(){this.otcTabbarState&&this.otcTabbarState.ordersFilter&&(this.ordersFilter=this.otcTabbarState.ordersFilter),this.updatePage()},methods:{toggleOrder:function(t){"ok"!=this.pageStatus&&"error"!=this.pageStatus||(this.$store.commit("updateTabbarState",{ordersFilter:t}),this.ordersFilter=t,this.isLoading=!1,this.isLoadOver=!1,this.currentPage=1,this.updatePage())},updatePage:function(){var t=this;this.pageStatus="loading",this.$http.post(this.$api.getOrderList,{pageno:this.currentPage,status:this.ordersFilter}).then(function(a){0==a.data.errcode?(t.pageData=a.data.data,t.pageStatus="ok",t.$store.commit("setTabbarMsg",t.pageData.msgCount)):(t.pageStatus="error",t.$toast("提示：".concat(a.data.errmsg)))}).catch(function(a){console.log(a),t.pageStatus="error"})},toOrderDetail:function(t){"buy"===t.myAction?this.$router.push({path:"/orderBuyer",query:{orderId:t.orderId}}):this.$router.push({path:"/orderSeller",query:{orderId:t.orderId}})},loadTop:function(){var t=this;this.$http.post(this.$api.getOrderList,{pageno:this.currentPage,status:this.ordersFilter}).then(function(a){t.$refs.loadmore&&t.$refs.loadmore.onTopLoaded(),t.isLoading=!1,t.isLoadOver=!1,t.currentPage=1,0==a.data.errcode?t.pageData=a.data.data:t.$toast("提示：".concat(a.data.errmsg))}).catch(function(a){console.log(a),t.$refs.loadmore&&t.$refs.loadmore.onTopLoaded(),t.isLoading=!1,t.isLoadOver=!1,t.currentPage=1})},loadMore:function(){var t=this;this.isLoading||this.isLoadOver||(console.log("load..."),this.isLoading=!0,this.$http.post(this.$api.getOrderList,{pageno:this.currentPage+1,status:this.ordersFilter}).then(function(a){if(t.isLoading=!1,0==a.data.errcode){var e;if(!a.data.data.orderList.length)return void(t.isLoadOver=!0);t.currentPage++,(e=t.pageData.orderList).push.apply(e,Object(r["a"])(a.data.data.orderList))}else t.$toast("提示: ".concat(a.data.errmsg))}).catch(function(a){console.log(a),t.isLoading=!1}))}},components:{pageLoading:c["a"],tabbar:l["a"],noData:d["a"]}},p=u,f=(e("c2ec"),e("2877")),v=Object(f["a"])(p,s,i,!1,null,"c78ca816",null);v.options.__file="orders.vue";a["default"]=v.exports}}]);