(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dfe6eb2"],{6951:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"page-container"},[e("chatEntry",{attrs:{orderId:t.orderId,msgNum:t.pageData.unReadCount}}),e("popupAppeal",{key:"popupAppeal",ref:"popupAppeal",attrs:{status:t.popupAppeal.status,appealRole:t.popupAppeal.appealRole},on:{closePopup:function(a){t.popupAppeal.status=!1},confirmAppeal:t.confirmAppeal}}),e("popupInputPw",{key:"popupInputPw",ref:"popupInputPw",attrs:{status:t.popupInputPw.status,amount:t.popupInputPw.amount,symbol:t.popupInputPw.symbol,desc:t.popupInputPw.desc},on:{closePopup:function(a){t.popupInputPw.status=!1},confirmPw:t.confirmPw}}),"ok"==t.pageStatus?e("section",{staticClass:"container"},[e("div",{staticClass:"refresh-wrap clearfix"},[e("a",{staticClass:"btn-refresh",attrs:{href:"javascript:;"},on:{click:t.refresh}},[t._v("刷新")])]),e("div",{staticClass:"state"},["ordered"===t.pageData.status?e("p",{staticClass:"state-text"},[t._v("等待对方付款")]):"cancelled"===t.pageData.status?e("p",{staticClass:"state-text orange"},[t._v("已取消")]):"paid"===t.pageData.status||"overdue"===t.pageData.status?e("p",{staticClass:"state-text"},[t._v("请确认收到付款")]):"done"===t.pageData.status?e("div",{staticClass:"state-success"},[e("img",{staticClass:"state-success-icon",attrs:{src:s("c11e"),alt:""}}),e("p",{staticClass:"state-success-text"},[t._v("已完成")])]):t._e(),e("p",{staticClass:"value dinMedium"},[t._v("¥"+t._s(t.pageData.value))])]),e("div",{staticClass:"info"},[e("ul",{staticClass:"info-list"},[e("li",{staticClass:"info-item clearfix"},[e("p",{staticClass:"info-item-field"},[t._v("买家")]),e("div",{staticClass:"info-item-value-wrap clearfix"},[e("p",{staticClass:"info-item-value"},[t._v(t._s(t.pageData.buyerData.nickname))]),e("div",{staticClass:"avatar-wrap",class:{paid:"none"!=t.pageData.payWay}},[e("img",{staticClass:"avatar",attrs:{src:t.pageData.buyerData.avatar,alt:""}})]),"none"!=t.pageData.payWay?e("p",{staticClass:"info-dialoge"},[t._v("已打款至您的"+t._s(t.payWayDict[t.pageData.payWay])+"了")]):t._e()])]),t.pageData.buyerData.kycName?e("li",{staticClass:"info-item clearfix"},[e("p",{staticClass:"info-item-field"},[t._v("买家姓名")]),e("p",{staticClass:"info-item-value"},[t._v(t._s(t.pageData.buyerData.kycName))])]):t._e(),e("li",{staticClass:"info-item clearfix"},[e("p",{staticClass:"info-item-field"},[t._v("交易单价")]),e("p",{staticClass:"info-item-value"},[t._v("¥ "+t._s(t.pageData.price))])]),e("li",{staticClass:"info-item clearfix"},[e("p",{staticClass:"info-item-field"},[t._v("交易数量")]),e("p",{staticClass:"info-item-value"},[t._v(t._s(t.pageData.amount)+" "+t._s(t.pageData.symbol))])]),e("li",{staticClass:"info-item clearfix"},[e("p",{staticClass:"info-item-field"},[t._v("交易单号")]),e("p",{staticClass:"info-item-value"},[t._v(t._s(t.pageData.orderNum))])]),e("li",{staticClass:"info-item clearfix"},[e("p",{staticClass:"info-item-field"},[t._v("下单时间")]),e("p",{staticClass:"info-item-value"},[t._v(t._s(t._f("timestamp2dateTime")(t.pageData.orderTime)))])]),t.pageData.advNote?e("li",{staticClass:"info-note"},[t._v("备注："+t._s(t.pageData.advNote))]):t._e()])]),e("div",{staticClass:"operation"},["ordered"===t.pageData.status?[e("a",{staticClass:"common-btn disabled btn-main",attrs:{href:"javascript:;"}},[t._v("等待对方付款 ("+t._s(t.countDownTime.minute)+" : "+t._s(t.countDownTime.second)+")")]),e("p",{staticClass:"tips text-center"},[t._v("（15分钟内对方未完成付款交易会被取消）")])]:"cancelled"===t.pageData.status?[e("p",{staticClass:"tips orange"},[t._v("对方未在15分钟内完成付款，交易已取消，您的"+t._s(t.pageData.symbol)+"已解冻，请到钱包资产查看")])]:"paid"===t.pageData.status?[e("buttonLoading",{staticClass:"btn-main",attrs:{status:t.btnLoading.status,normalText:"确认收到付款 ("+t.countDownTime.minute+" : "+t.countDownTime.second+")"},on:{handleClick:t.confirmOrder}}),e("p",{staticClass:"tips"},[t._v("收到付款后，请务必在15分钟内确认，如果有3次未及时确认将会被列入黑名单")])]:"overdue"===t.pageData.status?[e("buttonLoading",{staticClass:"btn-main",attrs:{status:t.btnLoading.status,normalText:"确认收到付款 (已超时)"},on:{handleClick:t.confirmOrder}}),e("p",{staticClass:"tips"},[t._v("收到付款后，请务必在15分钟内确认，如果有3次未及时确认将会被列入黑名单")])]:"done"===t.pageData.status?[e("a",{staticClass:"common-btn btn-main",attrs:{href:"javascript:;"},on:{click:t.goIndex}},[t._v("返回首页")])]:t._e(),"paid"===t.pageData.status||"overdue"===t.pageData.status?["none"==t.pageData.appealStatus?e("a",{staticClass:"appeal",attrs:{href:"javascript:;"},on:{click:t.handleAppeal}},[t._v("提交申诉")]):"buyer"==t.pageData.appealStatus?e("p",{staticClass:"appeal appeal-done"},[t._v("对方申诉")]):"seller"==t.pageData.appealStatus?e("p",{staticClass:"appeal appeal-done"},[t._v("您已申诉")]):e("p",{staticClass:"appeal appeal-done"},[t._v("申诉中")])]:t._e()],2)]):e("page-loading",{attrs:{color:"#4D72FE"}})],1)},i=[],o=s("273c"),p=s("dbb6"),n=s("5c9f"),r=s("e7bd"),l=s("d6f6"),c={name:"orderSeller",data:function(){return{pageStatus:"",pageData:{status:"",appealStatus:""},orderId:this.$route.query.orderId,payWayDict:{none:"",wx:"微信",ali:"支付宝",bank:"银行卡"},countDownEndTimestamp:"",countDownTime:{},timer:null,timer2:null,btnLoading:{status:"normal"},popupAppeal:{status:!1,appealRole:""},popupInputPw:{status:!1,amount:"",symbol:"",desc:"OTC场外兑换"}}},components:{pageLoading:o["a"],buttonLoading:p["a"],popupAppeal:n["a"],chatEntry:r["a"],popupInputPw:l["a"]},computed:{},mounted:function(){this.updatePage()},beforeDestroy:function(){clearInterval(this.timer),clearInterval(this.timer2)},methods:{refresh:function(){window.location.reload()},updatePage:function(t){var a,s=this;a=t&&t.isRefresh?this.$httpNoToast:this.$http,a.post(this.$api.getOrderData,{orderId:this.orderId}).then(function(t){0==t.data.errcode?(s.pageData.status!==t.data.data.status&&(s.pageData=t.data.data,s.updateCountDownTime(),s.pollingRefresh()),s.pageData.appealStatus=t.data.data.appealStatus,s.pageData.unReadCount=t.data.data.unReadCount,s.pageStatus="ok"):s.$toast("提示：".concat(t.data.errmsg))})},updateCountDownTime:function(){var t=this;clearInterval(this.timer),this.countDownEndTimestamp=this.$utils.calcEndTimestampByDiffS(this.pageData.remainTime),"ordered"!==this.pageData.status&&"paid"!==this.pageData.status||(this.countDownTime=this.$utils.calcDiffTimeFromNow(this.countDownEndTimestamp),this.timer=setInterval(function(){t.countDownTime.isEnd&&(clearInterval(t.timer),t.updatePage()),t.countDownTime=t.$utils.calcDiffTimeFromNow(t.countDownEndTimestamp)},1e3))},pollingRefresh:function(){var t=this;clearInterval(this.timer2),"ordered"!=this.pageData.status&&"paid"!=this.pageData.status&&"overdue"!=this.pageData.status||(this.timer2=setInterval(function(){t.updatePage({isRefresh:!0})},5e3))},confirmOrder:function(){this.popupInputPw.status=!0,this.popupInputPw.amount=this.pageData.amount,this.popupInputPw.symbol=this.pageData.symbol},confirmPw:function(t){var a=this;this.btnLoading.status="loading",this.$http.post(this.$api.orderDone,{orderId:this.orderId,paywd:t.password}).then(function(t){a.btnLoading.status="normal",0==t.data.errcode?(clearInterval(a.timer),a.updatePage()):a.$toast("提示：".concat(t.data.errmsg))}).catch(function(t){console.log(t),a.btnLoading.status="normal"})},handleAppeal:function(){this.popupAppeal.appealRole="seller",this.popupAppeal.status=!0},confirmAppeal:function(t){var a=this;this.$http.post(this.$api.addAppeal,{orderId:this.orderId,reason:t}).then(function(t){0==t.data.errcode?(a.$messagebox({title:"申诉申请已提交",message:"请耐心等待，客服将会在1个工作日联系您，请保持电话畅通",confirmButtonText:"确认"}),a.pageData.appealStatus=t.data.data.appealStatus):a.$toast("提示：".concat(t.data.errmsg))})},goIndex:function(){this.$router.push({path:"/index"})}}},u=c,d=(s("6fbd"),s("2877")),m=Object(d["a"])(u,e,i,!1,null,"4a1b5a0c",null);m.options.__file="orderSeller.vue";a["default"]=m.exports},"6fbd":function(t,a,s){"use strict";var e=s("fbfe"),i=s.n(e);i.a},c108:function(t,a,s){},d6f6:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{directives:[{name:"show",rawName:"v-show",value:t.wrapStatus,expression:"wrapStatus"}],staticClass:"popup",on:{touchmove:function(t){t.preventDefault()}}},[s("transition",{attrs:{name:"zoomIn"},on:{"before-enter":t.beforeEnter,"after-leave":t.afterLeave}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],staticClass:"popup-content-wrap"},[s("div",{staticClass:"popup-close",on:{click:t.closePopup}}),s("div",{staticClass:"popup-content"},[s("h3",{staticClass:"title"},[t._v(t._s(t.title))]),s("div",{staticClass:"info-wrap"},[s("p",{staticClass:"info"},[t._v(t._s(t.desc))]),s("p",{staticClass:"amount dinMedium"},[t._v(t._s(+t.amount)),s("span",{staticClass:"symbol"},[t._v(t._s(t.symbol))])])]),s("div",{staticClass:"password"},[s("p",{staticClass:"block",class:t.password.length>=1?"filled":""}),s("p",{staticClass:"block",class:t.password.length>=2?"filled":""}),s("p",{staticClass:"block",class:t.password.length>=3?"filled":""}),s("p",{staticClass:"block",class:t.password.length>=4?"filled":""}),s("p",{staticClass:"block",class:t.password.length>=5?"filled":""}),s("p",{staticClass:"block",class:t.password.length>=6?"filled":""}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"tel",autofocus:"autofocus"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}})])])])])],1)},i=[],o=s("cebc"),p=(s("c5f6"),s("8739")),n={data:function(){return{wrapStatus:!1,hasPaywd:"",password:"",isConfirmed:!1}},props:{status:Boolean,amount:[Number,String],symbol:String,title:{type:String,default:"输入支付密码"},desc:{type:String,default:"支付"},extraParas:{type:Object,default:function(){return{}}}},watch:{password:function(t,a){t&&!/^[0-9]{0,6}$/.test(t)&&(this.password=a||""),/^[0-9]{6}$/.test(t)&&(0==this.isConfirmed?(this.$emit("confirmPw",{extraParas:Object(o["a"])({},this.extraParas),password:this.password,amount:this.amount}),this.isConfirmed=!0,this.$emit("closePopup")):this.password="")}},created:function(){var t=this;this.$http.post(this.$api.getUserData).then(function(a){0==a.data.errcode?t.hasPaywd=a.data.data.hasPaywd:t.$toast("提示：".concat(a.data.errmsg))})},methods:{beforeEnter:function(){this.hasPaywd?(this.password="",this.isConfirmed=!1,this.wrapStatus=!0):this.$messagebox({title:"提示",message:"您还未设置支付密码",confirmButtonText:"去设置"}).then(function(t){"confirm"===t&&Object(p["b"])("settings")})},afterLeave:function(){this.password="",this.wrapStatus=!1},closePopup:function(){this.$emit("closePopup")}}},r=n,l=(s("e18b"),s("2877")),c=Object(l["a"])(r,e,i,!1,null,"219a3452",null);c.options.__file="popupInputPw.vue";a["a"]=c.exports},e18b:function(t,a,s){"use strict";var e=s("c108"),i=s.n(e);i.a},fbfe:function(t,a,s){}}]);