(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd690754"],{"0044":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"none"}})},o=[],r=(n("96cf"),n("3b8d")),a=(n("6f81"),n("1c48")),s={data:function(){return{result:{},captchaObj:null,interval:null}},created:function(){var t=this;this.init(),this.interval=setInterval((function(){t.init()}),29e4)},destroyed:function(){clearInterval(this.interval)},computed:{langForGeetest:function(){var t=this.$store.state.locale;switch(t){case"cn":t="zh-cn";break;case"en":t="en";break;default:t="en"}return t}},methods:{captchaHandler:function(t){var e=this;this.captchaObj=t,t.onReady((function(){e.$emit("onReady",e.captchaObj)})).onSuccess((function(){var n=t.getValidate();e.$emit("onSuccess",n)})).onClose((function(){e.$emit("onClose")})).onError((function(t){e.$emit("onError",t)}))},init:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a["a"].initGeetest();case 3:e=t.sent,n=e.data,window.initGeetest({gt:n.gt,challenge:n.challenge,offline:!n.success,new_captcha:n.new_captcha,product:"bind",width:"100%",lang:this.langForGeetest},this.captchaHandler),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.showErrMsg(t.t0.msg);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()}},c=s,u=n("2877"),l=Object(u["a"])(c,i,o,!1,null,null,null);e["a"]=l.exports},"0116":function(t,e,n){},"1ffa":function(t,e,n){"use strict";var i=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;e.validate=function(t){if(!t)return!1;if(t.length>254)return!1;var e=i.test(t);if(!e)return!1;var n=t.split("@");if(n[0].length>64)return!1;var o=n[1].split(".");return!o.some((function(t){return t.length>63}))}},2272:function(t,e,n){"use strict";var i=n("4ef6"),o=n.n(i);o.a},"2d44":function(t,e,n){"use strict";var i=n("b0fc"),o=n.n(i);o.a},"4ef6":function(t,e,n){},"5ead":function(t,e,n){},"6f81":function(t,e,n){"use strict";(function(t){n("a481");var e=n("7618");(function(n,i){"object"===Object(e["a"])(t)&&"object"===Object(e["a"])(t.exports)?t.exports=n.document?i(n,!0):function(t){if(!t.document)throw new Error("Geetest requires a window with a document");return i(t)}:i(n)})("undefined"!==typeof window?window:void 0,(function(t,n){if("undefined"===typeof t)throw new Error("Geetest requires browser environment");var i=t.document,o=t.Math,r=i.getElementsByTagName("head")[0];function a(t){this._obj=t}function s(t){var e=this;new a(t)._each((function(t,n){e[t]=n}))}a.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},s.prototype={api_server:"api.geetest.com",protocol:"http://",type_path:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){var t=this;return u(t.type)?t.fallback_config[t.type]:t.new_captcha?t.fallback_config.fullpage:t.fallback_config.slide},_extend:function(t){var e=this;new a(t)._each((function(t,n){e[t]=n}))}};var c=function(t){return"number"===typeof t},u=function(t){return"string"===typeof t},l=function(t){return"boolean"===typeof t},d=function(t){return"object"===Object(e["a"])(t)&&null!==t},f=function(t){return"function"===typeof t},p={},h={},v=function(){return parseInt(1e4*o.random())+(new Date).valueOf()},m=function(t,e){var n=i.createElement("script");n.charset="UTF-8",n.async=!0,n.onerror=function(){e(!0)};var o=!1;n.onload=n.onreadystatechange=function(){o||n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(o=!0,setTimeout((function(){e(!1)}),0))},n.src=t,r.appendChild(n)},g=function(t){return t.replace(/^https?:\/\/|\/$/g,"")},b=function(t){return t=t.replace(/\/+/g,"/"),0!==t.indexOf("/")&&(t="/"+t),t},w=function(t){if(!t)return"";var e="?";return new a(t)._each((function(t,n){(u(n)||c(n)||l(n))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")})),"?"===e&&(e=""),e.replace(/&$/,"")},_=function(t,e,n,i){e=g(e);var o=b(n)+w(i);return e&&(o=t+e+o),o},y=function(t,e,n,i,o){var r=function r(a){var s=_(t,e[a],n,i);m(s,(function(t){t?a>=e.length-1?o(!0):r(a+1):o(!1)}))};r(0)},C=function(e,n,i,o){if(d(i.getLib))return i._extend(i.getLib),void o(i);if(i.offline)o(i._get_fallback_config());else{var r="geetest_"+v();t[r]=function(e){"success"===e.status?o(e.data):e.status?o(i._get_fallback_config()):o(e),t[r]=void 0;try{delete t[r]}catch(n){}},y(i.protocol,e,n,{gt:i.gt,callback:r},(function(t){t&&o(i._get_fallback_config())}))}},x=function(t,e){var n={networkError:"网络错误"};if("function"!==typeof e.onError)throw new Error(n[t]);e.onError(n[t])},k=function(){return!!t.Geetest};k()&&(h.slide="loaded");var O=function(e,n){var i=new s(e);e.https?i.protocol="https://":e.protocol||(i.protocol=t.location.protocol+"//"),C([i.api_server||i.apiserver],i.type_path,i,(function(e){var o=e.type,r=function(){i._extend(e),n(new t.Geetest(i))};p[o]=p[o]||[];var a=h[o]||"init";"init"===a?(h[o]="loading",p[o].push(r),y(i.protocol,e.static_servers||e.domains,e[o]||e.path,null,(function(t){if(t)h[o]="fail",x("networkError",i);else{h[o]="loaded";for(var e=p[o],n=0,r=e.length;n<r;n+=1){var a=e[n];f(a)&&a()}p[o]=[]}}))):"loaded"===a?r():"fail"===a?x("networkError",i):"loading"===a&&p[o].push(r)}))};return t.initGeetest=O,O}))}).call(this,n("dd40")(t))},8366:function(t,e,n){"use strict";var i=n("0116"),o=n.n(i);o.a},acb4:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showScatter,expression:"!showScatter"}],staticClass:"box-container login"},[n("div",{staticClass:"title-container"},[n("div",{staticClass:"title-first__desc",on:{click:t.todoTest}},[n("span",[t._v(t._s(t.$t("login.Logintocontinue")))])])]),n("div",{staticClass:"login-container"},[n("div",{staticClass:"form-container"},[n("div",{staticClass:"form-item form-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-input__inner",attrs:{type:"text",placeholder:t.$t("login.EmailOrMobile")},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),n("div",{staticClass:"form-item form-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-input__inner",attrs:{type:"password",placeholder:t.$t("login.Password")},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("div",{staticClass:"form-item form-desc clear"},[n("router-link",{staticClass:"fl pointer",attrs:{to:{name:"register"},tag:"span"}},[t._v(t._s(t.$t("login.SignUp")))]),n("router-link",{staticClass:"fr pointer",attrs:{to:{name:"forget-password"},tag:"span"}},[t._v(t._s(t.$t("login.ForgotPassword")))])],1),n("div",{staticClass:"form-submit"},[n("button",{staticClass:"btn btn-submit",attrs:{type:"button",disabled:!t.isValidForm||5===t.forgetPwdIndex},on:{click:t.openGeetest}},[t._v(t._s(t.$t("login.Login")))])])])]),n("div",{staticClass:"scatter-login-switch"},[n("a",{attrs:{href:"javascript:;"},on:{click:t.bitcvLogin}},[t._v(t._s(t.$t("login.LoginForBitcv")))])])]),n("InvitationCode",{attrs:{visible:t.invitationCodeVisible},on:{hide:t.hideInviationCode,confirm:t.submitInvitationCode}}),n("AppGeetest",{on:{onReady:t.handleReady,onSuccess:t.saveInfo}})],1)},o=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("a481"),n("bd86")),a=(n("96cf"),n("3b8d")),s=n("0044"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"login-dialog"},[i("v-dialog",{model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("div",{staticClass:"dialog-container"},[i("div",{staticClass:"dialog-close pointer",on:{click:t.hide}},[i("img",{attrs:{src:n("9d03")}})]),i("div",{staticClass:"dialog-content"},[i("div",{staticClass:"title-container"},[i("div",{staticClass:"title-first__desc"},[i("p",[t._v(t._s(t.$t("login.BindInvitationCode")))])])]),i("div",{staticClass:"form-container"},[i("div",{staticClass:"form-item form-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.invitationCode,expression:"invitationCode"}],staticClass:"form-input__inner",attrs:{type:"text",placeholder:t.$t("user.EnterInvitationCode")},domProps:{value:t.invitationCode},on:{input:function(e){e.target.composing||(t.invitationCode=e.target.value)}}})]),i("div",{staticClass:"form-submit"},[i("button",{staticClass:"btn btn-submit",attrs:{type:"button"},on:{click:t.submitInvitationCode}},[t._v(t._s(t.$t("login.Confirm")))])])])])])])],1)])},u=[],l={data:function(){return{invitationCode:""}},props:{visible:{type:Boolean,default:!1}},watch:{code:function(t){8===t.length&&this.submitInvitationCode()}},methods:{hide:function(){this.$emit("hide")},submitInvitationCode:function(){8===this.invitationCode.length?this.$emit("confirm",this.invitationCode):this.showErrMsg("邀请码长度不正确")}}},d=l,f=(n("2d44"),n("8366"),n("2877")),p=Object(f["a"])(d,c,u,!1,null,"3e9af0ca",null),h=p.exports,v=n("1c48");n("28a5");function m(t){if(t=t||window.location.href,-1===t.indexOf("?"))return{};var e="?"===t[0]?t.substr(1):t.substring(t.lastIndexOf("?")+1);if(""===e)return{};-1!=e.indexOf("#")&&(e=e.slice(0,e.indexOf("#"))),e=e.split("&");for(var n={},i=0;i<e.length;i++){var o=e[i].split("=");n[decodeURIComponent(o[0])]=decodeURIComponent(o[1]||"")}return n}var g=m;function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(n,!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _=n("1ffa"),y={data:function(){return{authReady:!1,auth:null,geetestInfo:{},account:"",password:"",isGoogle:!1,showScatter:!1,invitationCodeVisible:!1,forgetPwdIndex:0}},components:{AppGeetest:s["a"],InvitationCode:h},created:function(){var t=g();if("bitcvLoginSuccess"===t.state){var e=this.$route.fullPath,n="".concat(window.location.origin,"/#").concat(e);history.replaceState(null,null,n),this.bitcvLoginConfirm(t.code)}},methods:{todoTest:function(){},handleReady:function(t){this.authReady=!0,this.auth=t},openGeetest:function(){this.auth.verify()},saveInfo:function(t){this.geetestInfo=t,this.submitLoginInfo()},submitLoginInfo:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r,a,s,c=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isValidEmail){t.next=10;break}return o=w({email:this.account,password:this.password,code:e},this.geetestInfo),t.next=5,v["a"].loginWithEmail(o);case 5:r=t.sent,n=r.data,i=r.msg,t.next=16;break;case 10:return a=w({area_code:"86",mobile:this.account,password:this.password,code:e},this.geetestInfo),t.next=13,v["a"].loginWithMobile(a);case 13:s=t.sent,n=s.data,i=s.msg;case 16:if("need 2fa code"!==i){t.next=19;break}return this.$modal.show({title:"登录验证",authList:["google"],onConfirm:function(t){var e=t.googleCode;return c.submitLoginInfo(e)}}),t.abrupt("return");case 19:this.loginUser(n),this.$modal.hide(),t.next=28;break;case 23:t.prev=23,t.t0=t["catch"](0),this.showErrMsg(t.t0.msg),"password"===t.t0.type?(this.password="",this.forgetPwdIndex++,5===this.forgetPwdIndex&&this.showErrMsg("密码输入次数过多，请找回密码")):"email"!==t.t0.type&&"mobile"!==t.t0.type||(this.account="",this.password=""),t.t0.geetestFail&&(this.account="",this.password="");case 28:case"end":return t.stop()}}),t,this,[[0,23]])})));function e(e){return t.apply(this,arguments)}return e}(),loginUser:function(t){var e=t.email,n=t.area_code,i=t.mobile,o=t.token,r=t.member_id,a=t.market,s=t.redirect,c=void 0===s||s;this.$store.commit("setToken",o),this.$store.commit("setLoginStatus",!0),this.$store.commit("setMemberID",r),this.$store.commit("updateAccountInfo",{email:e,mobile:i,areaCode:n}),this.$store.commit("updateFavMarkets",a),c&&this.$router.push({name:"exchange",params:{market:this.$store.getters.navExchangeMarket}})},bitcvLogin:function(){var t=encodeURIComponent(window.location.href),e="".concat("bcvSWYrnVveROyEx"),n="https://open.bitcv.com/oauth2/authorize?appid=".concat(e,"&redirectUri=").concat(t,"&responseType=code&scope=userinfo&state=bitcvLoginSuccess");window.location.replace(n)},bitcvLoginConfirm:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v["a"].loginWithBitcv({code:e});case 3:n=t.sent,i=n.data,i.is_invite?(this.invitationCodeVisible=!0,this.loginUser(w({},i,{redirect:!1}))):this.loginUser(i),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.showErrMsg(t.t0.msg);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}(),hideInviationCode:function(){this.invitationCodeVisible=!1,this.$router.push({name:"user"})},submitInvitationCode:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v["a"].bindInvitationCode({code:e});case 3:this.$router.push({name:"exchange",params:{market:this.$store.getters.navExchangeMarket}}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),this.showErrMsg(t.t0.msg);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(e){return t.apply(this,arguments)}return e}()},computed:{isValidEmail:function(){return _.validate(this.account)},isValidMobile:function(){return/^[0-9]{7,11}$/.test(this.account)},isValidForm:function(){return(this.isValidEmail||this.isValidMobile)&&""!==this.password}}},C=y,x=(n("2272"),n("dc70"),Object(f["a"])(C,i,o,!1,null,"157bc971",null));e["default"]=x.exports},b0fc:function(t,e,n){},dc70:function(t,e,n){"use strict";var i=n("5ead"),o=n.n(i);o.a},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}}}]);